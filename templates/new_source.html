<!DOCTYPE html>
<head>
    <title>New Source</title>
    <link rel="stylesheet" href="/css/base.css">
</head>
<body>
    <div>
        <form method="post">
            <input type="text" value="" placeholder="Name" name="name"><br>
            <input type="text" value="" placeholder="Location" name="location"><br>
            <input type="text" value="" placeholder="Type" name="type"><br>
            <input type="text" value="" placeholder="Optional: Magnitude" name="magnitude"><br>
            <input type="text" class="text" placeholder="Shutoff Instructions" name="shutoff_ins"><br>
            <input type="text" class="text" placeholder="Startup Instructions" name="startup_ins"><br>
            <input type="text" class="text" placeholder="Verification Instructions" name="verif_ins"><br>
            <!-- <label for="locked">Locked: </label>
            <input type="checkbox" value="locked" style="width: 5rem;" placeholder="locked" name="locked"><br> -->
            <input type="submit" value="Submit"><br>
        </form>
        <p style="color:red;">{{message}}</p>
        <br><br><a href="../">Back</a>
    </div>
</body>

<style type="text/css">
    .text {
        overflow: hidden;
        resize: none;
    }
</style>
<script type="text/javascript">
var observe;
if (window.attachEvent) {
    observe = function (element, event, handler) {
        element.attachEvent('on'+event, handler);
    };
}
else {
    observe = function (element, event, handler) {
        element.addEventListener(event, handler, false);
    };
}
function init () {
    var texts = document.getElementsByClassName('text');
    function resize () {
        text.style.height = 'auto';
        text.style.height = text.scrollHeight+'px';
    }
    /* 0-timeout to get the already changed text */
    function delayedResize () {
        window.setTimeout(resize, 0);
    }
    
    for (var i = 0; i < texts.length; i++) {
        let text = texts.item(i);
        observe(text, 'change',  resize);
        observe(text, 'cut',     delayedResize);
        observe(text, 'paste',   delayedResize);
        observe(text, 'drop',    delayedResize);
        observe(text, 'keydown', delayedResize);

        text.focus();
        text.select();
        resize();
    };
}
</script>